<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" layout:decorator="layouts/main">

<head>
	<title th:text="*{licitacion!=null}? 'Editar Licitaci&oacute;n' : 'Nueva Licitaci&oacute;n'"></title>
</head>

<body>

	<div layout:fragment="content">

		<section class="g-py-15">
			<div class="u-heading-v1-1 g-bg-main g-brd-transparent g-pa-30">
				<h2 class="h3 u-heading-v1__title" th:text="*{licitacion!=null}? 'Editar Licitacion' : 'Nueva Licitaci&oacute;n'"></h2>
			</div>

			<form class="g-pa-30 g-mb-30" th:object="${licitacion}" th:action="@{/licitaciones/save}" method="post" enctype="multipart/form-data">
				<input type="hidden" th:field="*{id}" />

				<div th:replace="~{fragments/inputs/dateField :: input('Fecha Publicaci&oacute;n', 'fechaPub', 'Errores Fecha Publicaci&oacute;n', true, false)}"></div>
				<div th:replace="~{/fragments/inputs/textareaField :: input('Descripci&oacute;n', 'descripcion', 'Errores Fecha Publicaci&oacute;n', 4, 50, true, false)}"></div>
				<div th:replace="~{/fragments/inputs/numberField :: input('Presupuesto', 'presupuesto', 0.01, 'Errores Presupuesto', true, false)}"></div>
				<div th:replace="~{/fragments/inputs/dateField :: input('Fecha Publicaci&oacute;n', 'finPlazo', 'Errores Fin Plazo', true, false)}"></div>
				<div th:replace="~{/fragments/inputs/selectField :: input('Medio', 'medio', ${medios}, 'Seleccionar medio', 'Errores medio', false, false)}"></div>
				<div th:replace="~{/fragments/inputs/fileField :: input('Fichero', 'Fichero&hellip;', 'fileToUpload', 'Errores fichero', false, false)}"></div>

				<div class="d-flex justify-content-between g-mt-30">
					<div>
						<a href="licitaciones.html" th:href="@{/licitaciones}" class="btn btn-md u-btn-outline-primary g-mr-10 g-mb-15">Atras</a>
					</div>
					<div>
						<button type="submit" class="btn btn-md u-btn-primary rounded-0">Guardar Licitaci&oacute;n</button>
					</div>
				</div>
			</form>
		</section>

		<script>
			$(document).on('change', ':file', function () {
				var input = $(this),
					numFiles = input.get(0).files ? input.get(0).files.length : 1,
					label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
				input.trigger('fileselect', [numFiles, label]);
			});
			// We can watch for our custom `fileselect` event like this
			$(document).ready(function () {
				$(':file').on('fileselect', function (event, numFiles, label) {
					var input = $(this).parents('.input-group').find(':text'),
						log = numFiles > 1 ? numFiles + ' files selected' : label;
					if (input.length) {
						input.val(log);
					} else {
						if (log) alert(log);
					}
				});
			});
		</script>
	</div>
</body>

</html>