<!DOCTYPE html>
<html lang="es" layout:decorator="/layouts/main">

<head>
	<title>Licitaciones</title>
</head>

<body>

	<div layout:fragment="content">
		<div th:replace="~{fragments/genericTable :: genericTable('user', 'Licitaciones', 'licitaciones', ~{::table})}"></div>
	</div>

	<table class="table u-table--v1 mb-0 table-striped table-hover">
		<thead>
			<tr class="g-col-border-top-0">
				<th>#</th>
				<th>Tipo</th>
				<th>Fecha Publicaci&oacute;n</th>
				<th>Descripci&oacute;n</th>
				<th>Presupuesto</th>
				<th>Fin plazo</th>
				<th>Medio</th>
				<th>Tama&ntilde;o</th>
			</tr>
		</thead>

		<tbody>
			<tr th:each="licitacion, itr : ${licitaciones}" th:href="@{/licitaciones/edit/{id}(id=${licitacion.id})}">
				<th scope="row">
					<fieldset class="g-pt-2">
						<div>
							<label>
								<input type="radio" name="optionsRadios" th:id="${'option' + licitacion.id}" th:checked="${itr.index == 0}" th:value="${licitacion.id}"
								/>
							</label>
						</div>
					</fieldset>
				</th>
				<td th:text="${licitacion.fichero!=null} ? ${licitacion.fichero.tipo}: ''"></td>
				<td th:text="${#dates.format(licitacion.fechaPub, 'dd-MM-yyyy')}"></td>
				<td th:switch="${licitacion.fichero}">
					<span th:case="null" th:text="${licitacion.descripcion}"></span>
					<span th:case="*">
						<a th:text="${licitacion.descripcion}" th:href="'./download/'+${encrypt.encrypt(licitacion.fichero.id)}" target="_blank"></a>
					</span>
				</td>
				<td th:text="${licitacion.presupuesto}+' &euro;'"></td>
				<td th:text="${#dates.format(licitacion.finPlazo, 'dd-MM-yyyy')}"></td>
				<td th:text="${licitacion.medio!=null}? ${licitacion.medio.text} : ''"></td>
				<td th:text="${licitacion.fichero!=null} ? 
					${#numbers.formatDecimal((licitacion.fichero.tamanyo/1024)/1024, 1, 'DEFAULT', 2, 'DEFAULT')}
					+' MB': ''"></td>
			</tr>
		</tbody>
	</table>
</body>

</html>